{
  "projectName": "aspire1",
  "description": "Multi-agent coordination context for .NET Aspire microservices solution",
  "mutationPolicy": {
    "precedence": [
      "per-service .agent-context.json",
      "repo root .agent-context.json",
      ".agent-checkpoints/* (guidance)",
      "narrative documentation"
    ],
    "nonCriticalDefault": "allow",
    "nonCriticalModel": "denylist (forbiddenMutations)",
    "criticalModel": "explicit allowlist + coordination",
    "note": "Default-allow applies only to non-CRITICAL services. CRITICAL shared components (e.g., ServiceDefaults) and coordination-only components (e.g., AppHost) must be explicitly allowed and coordinated."
  },
  "serviceDefaults": {
    "path": "aspire1.ServiceDefaults/",
    "shared": true,
    "readOnly": false,
    "mutationLevel": "CRITICAL",
    "mutationRules": [
      "Extensions.cs - Health check and OpenTelemetry setup",
      "ApplicationMetrics.cs - Application metrics definitions",
      "aspire1.ServiceDefaults.csproj - Dependency versions"
    ]
  },
  "services": [
    {
      "id": "web",
      "path": "aspire1.Web/",
      "agent": "web-agent",
      "technology": "Blazor Server",
      "mutationLevel": "NORMAL",
      "mutationAllowed": true,
      "allowedMutations": [
        "Components/**",
        "wwwroot/**",
        "Program.cs",
        "appsettings.json",
        "appsettings.Development.json"
      ],
      "forbiddenMutations": [],
      "dependencies": [
        "aspire1.ServiceDefaults/",
        "aspire1.ApiService/ (via WeatherApiClient)"
      ]
    },
    {
      "id": "api",
      "path": "aspire1.ApiService/",
      "agent": "api-agent",
      "technology": "Minimal API / ASP.NET Core",
      "mutationLevel": "NORMAL",
      "mutationAllowed": true,
      "allowedMutations": [
        "Program.cs",
        "*.cs (endpoints, handlers)",
        "appsettings.json"
      ],
      "forbiddenMutations": [
        "Health check endpoints - Coordinated via ServiceDefaults"
      ],
      "dependencies": [
        "aspire1.ServiceDefaults/",
        "aspire1.WeatherService/"
      ]
    },
    {
      "id": "weather",
      "path": "aspire1.WeatherService/",
      "agent": "weather-agent",
      "technology": "Minimal API / ASP.NET Core",
      "mutationLevel": "NORMAL",
      "mutationAllowed": true,
      "allowedMutations": [
        "Program.cs",
        "Services/**",
        "appsettings.json"
      ],
      "forbiddenMutations": [
        "Health check endpoints - Coordinated via ServiceDefaults"
      ],
      "dependencies": [
        "aspire1.ServiceDefaults/"
      ]
    }
  ],
  "infrastructure": {
    "id": "infra",
    "path": "infra/",
    "agent": "infra-agent",
    "technology": "Bicep / Azure Deployment",
    "mutationLevel": "NORMAL",
    "mutationAllowed": true,
    "allowedMutations": [
      "*.bicep",
      "main.bicep (orchestration)",
      "azure.yaml"
    ],
    "dependencies": [
      "aspire1.AppHost/ (reference only)",
      "All service projects (reference for deployment)"
    ]
  },
  "orchestration": {
    "path": "aspire1.AppHost/",
    "agent": "none - Coordination only",
    "technology": ".NET Aspire AppHost",
    "mutationLevel": "CRITICAL",
    "mutationAllowed": false,
    "note": "Should only be modified after service changes are validated. Changes here coordinate all services.",
    "dependencies": [
      "All other services"
    ]
  }
}
